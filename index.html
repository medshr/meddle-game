<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meddle - The Medical Disease Guessing Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Tailwind gray-900 */
        }
        /* Custom styles for autocomplete */
        .autocomplete-items {
            position: absolute;
            border: 1px solid #4B5563; /* gray-600 */
            border-top: none;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background-color: #1F2937; /* gray-800 */
        }
        .autocomplete-items div {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #374151; /* gray-700 */
        }
        .autocomplete-items div:hover {
            background-color: #374151; /* gray-700 */
        }
        .autocomplete-active {
            background-color: #4F46E5 !important; /* indigo-600 */
            color: #ffffff;
        }
        .feedback-cell {
            transition: transform 0.5s, background-color 0.5s;
            transform-style: preserve-3d;
        }
        .correct { background-color: #10B981; /* Emerald-500 */ }
        .incorrect { background-color: #EF4444; /* Red-500 */ }
    </style>
</head>
<body class="text-white antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-emerald-400">Meddle</h1>
            <p class="text-lg text-gray-400 mt-2">Guess the medical disease!</p>
        </header>
        
        <!-- Game Instructions -->
        <div class="bg-gray-800 p-4 rounded-lg mb-6 text-sm text-gray-300">
            <h2 class="font-semibold text-lg mb-2 text-white">How to Play</h2>
            <p>Type the name of a disease and press Guess. You have 8 attempts to find the correct one.</p>
            <p class="mt-2">After each guess, you'll see feedback:</p>
            <ul class="list-disc list-inside mt-2 space-y-1">
                <li><span class="inline-block w-4 h-4 rounded bg-emerald-500 mr-2"></span><span class="font-semibold">Green</span> indicates a correct attribute.</li>
                <li><span class="inline-block w-4 h-4 rounded bg-red-500 mr-2"></span><span class="font-semibold">Red</span> indicates an incorrect attribute.</li>
                <li>For 'Year Discovered', <span class="font-bold text-white">▲</span> means the target year is higher, and <span class="font-bold text-white">▼</span> means it's lower.</li>
            </ul>
        </div>

        <!-- Game Interface -->
        <main id="game-board" class="bg-gray-800 p-6 rounded-xl shadow-2xl">
            <!-- Input Form -->
            <div class="relative mb-4">
                <input type="text" id="guess-input" placeholder="Type a disease name..." class="w-full bg-gray-700 border-2 border-gray-600 rounded-lg p-3 text-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition">
                <div id="autocomplete-list" class="autocomplete-items rounded-b-lg"></div>
            </div>
            <button id="guess-button" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300 ease-in-out transform hover:scale-105">Guess</button>
            <p class="text-center text-gray-400 mt-2 text-sm">Guesses remaining: <span id="guesses-left">8</span></p>
            
            <!-- Guesses Table -->
            <div class="mt-6 overflow-x-auto">
                <table class="w-full text-center text-sm md:text-base">
                    <thead class="border-b-2 border-gray-600">
                        <tr>
                            <th class="p-2 font-semibold">Guess</th>
                            <th class="p-2 font-semibold">Specialty</th>
                            <th class="p-2 font-semibold">Causation</th>
                            <th class="p-2 font-semibold">Affected System</th>
                            <th class="p-2 font-semibold">Acuity</th>
                            <th class="p-2 font-semibold">Year Discovered</th>
                        </tr>
                    </thead>
                    <tbody id="guesses-container">
                        <!-- Guesses will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
        </main>
        
        <!-- Win/Loss Modal -->
        <div id="modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden">
            <div class="bg-gray-800 rounded-xl p-8 text-center max-w-sm w-full shadow-lg transform transition-all scale-95 opacity-0" id="modal-content">
                <h2 id="modal-title" class="text-3xl font-bold mb-4"></h2>
                <p id="modal-body" class="text-lg text-gray-300 mb-6"></p>
                <button id="play-again-button" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition duration-300">Play Again</button>
            </div>
        </div>

    </div>

    <script>
        const diseases = [
            { name: "Influenza", specialty: "Infectious Disease", causation: "Viral", system: "Respiratory", acuity: "Acute", year: 1933 },
            { name: "Hypertension", specialty: "Cardiology", causation: "Multifactorial", system: "Circulatory", acuity: "Chronic", year: 1896 },
            { name: "Diabetes Mellitus Type 1", specialty: "Endocrinology", causation: "Autoimmune", system: "Endocrine", acuity: "Chronic", year: 1889 },
            { name: "Asthma", specialty: "Pulmonology", causation: "Inflammatory", system: "Respiratory", acuity: "Chronic", year: 1873 },
            { name: "Alzheimer's Disease", specialty: "Neurology", causation: "Neurodegenerative", system: "Nervous", acuity: "Chronic", year: 1906 },
            { name: "Tuberculosis", specialty: "Infectious Disease", causation: "Bacterial", system: "Respiratory", acuity: "Chronic", year: 1882 },
            { name: "HIV/AIDS", specialty: "Infectious Disease", causation: "Viral", system: "Immune", acuity: "Chronic", year: 1981 },
            { name: "Malaria", specialty: "Infectious Disease", causation: "Parasitic", system: "Circulatory", acuity: "Acute", year: 1880 },
            { name: "Parkinson's Disease", specialty: "Neurology", causation: "Neurodegenerative", system: "Nervous", acuity: "Chronic", year: 1817 },
            { name: "Rheumatoid Arthritis", specialty: "Rheumatology", causation: "Autoimmune", system: "Skeletal", acuity: "Chronic", year: 1800 },
            { name: "Chickenpox", specialty: "Infectious Disease", causation: "Viral", system: "Integumentary", acuity: "Acute", year: 1553 },
            { name: "Epilepsy", specialty: "Neurology", causation: "Neurological", system: "Nervous", acuity: "Chronic", year: 1700 }, // Approximation
            { name: "Cystic Fibrosis", specialty: "Genetics", causation: "Genetic", system: "Respiratory", acuity: "Chronic", year: 1938 },
            { name: "Multiple Sclerosis", specialty: "Neurology", causation: "Autoimmune", system: "Nervous", acuity: "Chronic", year: 1868 },
            { name: "Crohn's Disease", specialty: "Gastroenterology", causation: "Inflammatory", system: "Digestive", acuity: "Chronic", year: 1932 }
        ];

        const MAX_GUESSES = 8;
        let targetDisease;
        let guessesLeft;
        let gameOver;

        // DOM Elements
        const guessInput = document.getElementById('guess-input');
        const guessButton = document.getElementById('guess-button');
        const guessesContainer = document.getElementById('guesses-container');
        const guessesLeftSpan = document.getElementById('guesses-left');
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const playAgainButton = document.getElementById('play-again-button');
        const autocompleteList = document.getElementById('autocomplete-list');

        function initializeGame() {
            targetDisease = diseases[Math.floor(Math.random() * diseases.length)];
            guessesLeft = MAX_GUESSES;
            gameOver = false;
            
            // Console log for debugging/learning
            console.log("Answer:", targetDisease.name);

            guessesContainer.innerHTML = '';
            guessInput.value = '';
            guessInput.disabled = false;
            guessButton.disabled = false;
            guessesLeftSpan.textContent = guessesLeft;
            hideModal();
        }

        function handleGuess() {
            if (gameOver) return;

            const guessName = guessInput.value.trim();
            const guessedDisease = diseases.find(d => d.name.toLowerCase() === guessName.toLowerCase());

            if (!guessedDisease) {
                alert("Invalid disease name. Please select from the list.");
                return;
            }

            guessesLeft--;
            guessesLeftSpan.textContent = guessesLeft;

            const newRow = document.createElement('tr');
            newRow.classList.add('bg-gray-700');

            const createCell = (text, isCorrect, yearComparison = null) => {
                const cell = document.createElement('td');
                cell.className = `p-3 m-1 rounded-md text-white font-medium ${isCorrect ? 'correct' : 'incorrect'}`;
                let content = text;
                if (yearComparison) {
                    content += ` <span class="font-bold">${yearComparison > 0 ? '▲' : '▼'}</span>`;
                }
                cell.innerHTML = content;
                return cell;
            };

            newRow.appendChild(createCell(guessedDisease.name, guessedDisease.name === targetDisease.name));
            newRow.appendChild(createCell(guessedDisease.specialty, guessedDisease.specialty === targetDisease.specialty));
            newRow.appendChild(createCell(guessedDisease.causation, guessedDisease.causation === targetDisease.causation));
            newRow.appendChild(createCell(guessedDisease.system, guessedDisease.system === targetDisease.system));
            newRow.appendChild(createCell(guessedDisease.acuity, guessedDisease.acuity === targetDisease.acuity));

            const yearCorrect = guessedDisease.year === targetDisease.year;
            const yearComparison = yearCorrect ? null : targetDisease.year - guessedDisease.year;
            newRow.appendChild(createCell(guessedDisease.year, yearCorrect, yearComparison));
            
            guessesContainer.appendChild(newRow);
            guessInput.value = '';
            closeAutocomplete();

            if (guessedDisease.name === targetDisease.name) {
                endGame(true);
            } else if (guessesLeft === 0) {
                endGame(false);
            }
        }

        function endGame(isWin) {
            gameOver = true;
            guessInput.disabled = true;
            guessButton.disabled = true;

            if (isWin) {
                showModal("You got it!", `The disease was <strong class="text-emerald-400">${targetDisease.name}</strong>.`);
            } else {
                showModal("Game Over!", `The correct disease was <strong class="text-emerald-400">${targetDisease.name}</strong>.`);
            }
        }

        function showModal(title, body) {
            modalTitle.textContent = title;
            modalBody.innerHTML = body;
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function hideModal() {
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                 modal.classList.add('hidden');
            }, 300);
        }
        
        // --- Autocomplete Logic ---
        function handleAutocomplete(e) {
            const value = e.target.value;
            closeAutocomplete();
            if (!value) return false;

            const filteredDiseases = diseases.filter(d => 
                d.name.toLowerCase().startsWith(value.toLowerCase())
            );

            filteredDiseases.forEach(disease => {
                const item = document.createElement('div');
                item.innerHTML = `<strong>${disease.name.substr(0, value.length)}</strong>${disease.name.substr(value.length)}`;
                item.addEventListener('click', () => {
                    guessInput.value = disease.name;
                    closeAutocomplete();
                });
                autocompleteList.appendChild(item);
            });
        }
        
        function closeAutocomplete() {
            autocompleteList.innerHTML = '';
        }

        // Event Listeners
        guessButton.addEventListener('click', handleGuess);
        guessInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                handleGuess();
            }
        });
        playAgainButton.addEventListener('click', initializeGame);
        guessInput.addEventListener('input', handleAutocomplete);
        document.addEventListener('click', (e) => {
            if (e.target !== guessInput) {
                closeAutocomplete();
            }
        });

        // Initial game start
        initializeGame();
    </script>
</body>
</html>

